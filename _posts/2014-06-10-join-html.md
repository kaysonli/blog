---
layout: post
title: HTML片段转JS代码
category : 开发工具
tagline: "Supporting tagline"
tags : [javascript, JS工具]
---
{% include JB/setup %}
# jekyll+github=我的博客新家
---

在前端开发过程中，有时会遇到这种场景：一大段已编辑好的HTML片段要用在JS代码里。如果HTML代码不多，直接拼成字符串也无所谓，一旦HTML太长，写在javascript里就会非常难看。例如要将一段HTML插入到某个DOM元素下，一般会这么写：

    var box = document.getElementById('box');
    var html = '<div><h2>什么是 HTML DOM？</h2><p>HTML DOM 是：</p><ul><li>HTML 的标准对象模型</li><li>HTML 的标准编程接口</li><li>W3C 标准</li></ul><p>HTML DOM 定义了所有 HTML 元素的<em>对象</em>和<em>属性</em>，以及访问它们的<em>方法</em>。</p><p><em>换言之，HTML DOM 是关于如何获取、修改、添加或删除 HTML 元素的标准。</em></p></div>';
	box.innerHTML = html;

这种写法非常不利于阅读和维护。通常有种做法，就是将HTML代码按照良好的格式写成多行，每一行字符串作为数组的一个元素，最后用Array的join方法连接起来。如下：

    var box = document.getElementById('box');
    var html = ['<div>',
				  '<h2>',
				    什么是 HTML DOM？',
				  '</h2>',
				  '<p>',
				    HTML DOM 是：',
				  '</p>',
				  '<ul>',
				    '<li>',
				      HTML 的标准对象模型',
				    '</li>',
				    '<li>',
				      HTML 的标准编程接口',
				    '</li>',
				    '<li>',
				      W3C 标准',
				    '</li>',
				  '</ul>',
				  '<p>',
				    HTML DOM 定义了所有 HTML 元素的',
				    '<em>',
				      对象',
				    '</em>',
				    和',
				    '<em>',
				      属性',
				    '</em>',
				    ，以及访问它们的',
				    '<em>',
				      方法',
				    '</em>',
				    。',
				  '</p>',
				  '<p>',
				    '<em>',
				      换言之，HTML DOM 是关于如何获取、修改、添加或删除 HTML 元素的标准。',
				    '</em>',
				  '</p>',
				'</div>'].join('');
    box.innerHTML = html;

这样写可读性就好很多。问题是，怎样将一大段HTML拆分成字符串数组？手写肯定不行，因为既费劲又容易出错。程序猿是喜欢偷懒的，偷懒就要用工具。